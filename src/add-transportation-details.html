<!DOCTYPE html>
<html
  lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:th="https://www.thymeleaf.org"
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agrotep</title>
    <link
      rel="shortcut icon"
      type="image/png"
      th:href="@{/assets/images/logos/favicon.png}"
    />
    <link rel="stylesheet" href="assets/css/styles.min.css" />
    <link rel="stylesheet" th:href="@{/assets/css/settingStyle.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/add-transportation.css}" />
    <link rel="stylesheet" th:href="@{/assets/css/login.css}" />
    <link
      rel="stylesheet"
      th:href="@{/assets/libs/select2-4.1.0-rc.0/dist/css/select2.css}"
    />

    <script defer="defer" th:inline="javascript">
      /*<![CDATA[*/
      const loadingTypes = /*[[${loadingTypes}]]*/ null;
      const unloadingTypes = /*[[${unloadingTypes}]]*/ null;
      const clientCompany = /*[[${clientCompany}]]*/ null;
      const clientCompanies = /*[[${clientCompanies}]]*/ null;
      const transportation = /*[[${transportation}]]*/ null;
      /*]]>*/
    </script>
    <style>
      tbody,
      thead {
        text-wrap: wrap;
      }
      tr {
        height: 30px;
        padding: 0;
      }
      .bd-wrapper {
        margin-left: 270px;
      }
      .table-row {
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin-bottom: 15px;
      }

      .table-row:hover {
        background-color: #f8f9fa;
      }

      .table-row > div {
        padding: 10px;
        border: 1px solid #dee2e6;
      }
      .logo-img-small {
        display: none;
      }
      .side-wd {
        width: 270px !important;
      }
      .side-hide {
        display: block !important;
      }
      @media (max-width: 2850px) {
        .bd-wrapper {
          margin-left: 100px;
        }
        .left-sidebar {
          width: 100px;
          border-right: 1px solid #ddd;
        }
        .hide-menu {
          display: none;
        }
        .logo-img {
          display: none;
        }
        .logo-img-small {
          display: block;
        }
        .logo-img-small img {
          width: 55px;
        }
      }

      @media (max-width: 1200px) {
        .bd-wrapper {
          margin-left: 10px;
        }
        .left-sidebar {
          width: 270px;
          border-right: 1px solid #ddd;
        }
        .hide-menu {
          display: block;
        }
        .logo-img {
          display: block;
        }
        .logo-img-small {
          display: none;
        }
      }
      @media (min-width: 900px) {
        tbody,
        thead {
          text-wrap: nowrap;
        }
      }
      @media (min-width: 1200px) {
        .header {
          width: calc(100% - 100px) !important;
        }
      }
      @media (min-width: 2850px) {
        .bd-wrapper {
          margin-left: 270px;
        }
        .header {
          width: calc(100% - 270px) !important;
        }
      }
    </style>
  </head>

  <body>
    <!--  Body Wrapper -->
    <div
      class="page-wrapper"
      id="main-wrapper"
      data-layout="vertical"
      data-navbarbg="skin6"
      data-sidebartype="full"
      data-sidebar-position="fixed"
      data-header-position="fixed"
    >
      <!-- Sidebar Start -->
      <aside class="left-sidebar background">
        <!-- Sidebar scroll-->
        <div>
          <div
            class="brand-logo d-flex align-items-center justify-content-between"
          >
            <div class="text-nowrap logo-img">
              <img
                src=""
                th:src="@{/assets/images/logos/dark-logo.png}"
                width="180"
                alt=""
              />
            </div>
            <div class="text-nowrap logo-img-small">
              <img
                src=""
                th:src="@{/assets/images/logos/favicon.png}"
                id="togl-side-btn"
                width="180"
                alt="icon"
                style="cursor: pointer"
              />
            </div>
            <div
              class="close-btn d-xl-none d-block sidebartoggler cursor-pointer"
              id="sidebarCollapse"
            >
              <i class="ti ti-x fs-8"></i>
            </div>
          </div>
          <!-- Sidebar navigation-->
          <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
            <ul id="sidebarnav">
              <li class="nav-small-cap">
                <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                <span class="hide-menu">Логістика</span>
              </li>
              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  th:href="@{/import-export}"
                  aria-expanded="false"
                >
                  <span>
                    <i class="ti ti-layout-dashboard"></i>
                  </span>
                  <span class="hide-menu">Імпорт-експорт</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a
                  class="sidebar-link"
                  th:href="@{/notebook}"
                  aria-expanded="false"
                >
                  <span>
                    <i class="ti ti-notebook"></i>
                  </span>
                  <span class="hide-menu">Зошит</span>
                </a>
              </li>
            </ul>
          </nav>
          <!-- End Sidebar navigation -->
        </div>
        <!-- End Sidebar scroll-->
      </aside>
      <!--  Sidebar End -->
      <!--  Main wrapper -->
      <div class="bd-wrapper">
        <!--  Header Start -->
        <header class="app-header header background">
          <nav class="navbar navbar-expand-lg navbar-light">
            <ul class="navbar-nav">
              <li class="nav-item d-block d-xl-none">
                <a
                  class="nav-link sidebartoggler nav-icon-hover"
                  id="headerCollapse"
                >
                  <i class="ti ti-menu-2"></i>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link nav-icon-hover">
                  <i class="ti ti-bell-ringing"></i>
                  <div class="notification bg-primary rounded-circle"></div>
                </a>
              </li>
            </ul>
            <div
              class="navbar-collapse justify-content-end px-0"
              id="navbarNav"
            >
              <ul
                class="navbar-nav flex-row ms-auto align-items-center justify-content-end"
              >
                <li class="nav-item dropdown">
                  <a
                    class="nav-link nav-icon-hover"
                    id="drop2"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <img
                      src=""
                      th:src="@{/assets/images/profile/user-1.jpg}"
                      alt=""
                      width="35"
                      height="35"
                      class="rounded-circle"
                    />
                  </a>
                  <div
                    class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up"
                    aria-labelledby="drop2"
                  >
                    <div class="message-body">
                      <a class="d-flex align-items-center gap-2 dropdown-item">
                        <i class="ti ti-user fs-6"></i>
                        <p class="mb-0 fs-3">Мій Профіль</p>
                      </a>
                      <a class="d-flex align-items-center gap-2 dropdown-item">
                        <i class="ti ti-list-check fs-6"></i>
                        <p class="mb-0 fs-3">Мої Задачі</p>
                      </a>
                      <a
                        href="javascript:void(0)"
                        class="d-flex align-items-center gap-2 dropdown-item"
                        data-bs-toggle="modal"
                        data-bs-target="#settingsModal"
                      >
                        <i class="ti ti-settings fs-6"></i>
                        <p class="mb-0 fs-3">Мої Налаштування</p>
                      </a>
                      <form th:action="@{/logout}" method="post">
                        <input
                          class="btn btn-outline-primary mx-3 mt-2 d-block"
                          type="submit"
                          value="Вийти з системи"
                        />
                      </form>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </nav>
        </header>

        <!--  Header End -->

        <div class="container-fluid background">
          <form
            action="#"
            th:action="@{${'/transportation-details/' + (transportation.id != null ? 'update' : 'add')}}"
            th:object="${transportation}"
            method="post"
            id="transportation-form"
          >
            <!--  Row 1 -->
            <div class="row">
              <!--  code input -->
              <div
                class="col d-flex align-items-strech"
                style="margin-top: 75px"
              >
                <div class="card w-100 background">
                  <div class="card-body background">
                    <div
                      class="d-sm-flex d-block align-items-center justify-content-between mb-9"
                    >
                      <div class="mb-5 mb-sm-5 fle">
                        <h5 class="card-title fw-semibold">
                          <span
                            th:text="${(transportation.id != null ? 'Оновити' : 'Нове') + ' замовлення'}"
                          >
                            Нове замовлення
                          </span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 100 100"
                            style="width: 25px; height: 25px"
                            th:if="${transportation.isSentToDr}"
                          >
                            <text
                              x="5"
                              y="55"
                              font-family="Arial"
                              font-size="50"
                              font-weight="bold"
                              th:attr="fill=${'ВПТ'.equals(transportation.domesticCompany) ? 'red' : 'blue'}"
                            >
                              D
                            </text>
                            <text
                              x="37"
                              y="70"
                              font-family="Arial"
                              font-size="50"
                              font-weight="bold"
                              th:attr="fill=${'ВПТ'.equals(transportation.domesticCompany) ? 'red' : 'blue'}"
                            >
                              R
                            </text>
                          </svg>
                        </h5>
                      </div>
                      <div
                        class="accordion"
                        id="historyAccordion"
                        style="
                          position: absolute;
                          z-index: 2;
                          top: 65px;
                          left: 0;
                          width: calc(100% - 50px);
                          margin-left: 30px;
                          margin-right: 20px;
                        "
                      >
                        <div class="accordion-item">
                          <h2 class="accordion-header">
                            <button
                              class="accordion-button collapsed text-center background"
                              type="button"
                              data-bs-toggle="collapse"
                              data-bs-target="#collapseThree"
                              aria-expanded="false"
                              aria-controls="collapseThree"
                            >
                              <i class="ti ti-hourglass-low fs-6 me-2"></i>
                              Історія змін
                            </button>
                          </h2>
                          <div
                            id="collapseThree"
                            class="accordion-collapse collapse"
                            data-bs-parent="#historyAccordion"
                          >
                            <div class="accordion-body">
                              <p th:each="logging: ${loggings}">
                                <i
                                  class="ti ti-circle-check fs-6 me-2"
                                  th:classappend="${logging.userAction.symbolClass}"
                                  th:style="${'color: ' + logging.userAction.symbolColor}"
                                ></i>
                                <span
                                  th:text="${#temporals.format(logging.creationDate, 'HH:mm dd.MM.yyyy')
                                                                      + ' ' + logging.userName
                                                                      + ' ' + logging.userAction.translation
                                                                      + ' ' + logging.objectData}"
                                >
                                  10:57 10.12.2023 Антон Самусь створив нове
                                  замовлення
                                </span>
                              </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <input
                      type="hidden"
                      id="transportation-id"
                      th:field="*{id}"
                    />
                    <input type="hidden" th:field="*{nus}" />

                    <!-- First Line: Input Select -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <div class="card p-4 background">
                          <label class="mb-3">
                            Клієнт
                            <select
                              id="select-client"
                              class="form-select"
                              th:field="*{clientCompanyFromSelector}"
                              required
                            >
                              <option
                                th:if="${transportation?.id == null}"
                                th:value="${null}"
                                th:text="${''}"
                              ></option>
                              <option
                                th:each="company: ${clientCompanies.values()}"
                                th:value="${company?.clientDto?.clientUniqueName}"
                                th:text="${company?.clientDto?.clientShortName}"
                              >
                                Fererro (оплата 45 календарних днів по
                                виставленню інвойсу, ліміт 300000 грн)
                              </option>
                            </select>
                            <span
                              hidden="hidden"
                              id="country-current-val"
                              th:text="${clientCompany?.clientDto?.clientUniqueName}"
                            ></span>
                          </label>
                          <p class="fw-semibold mb-2" style="color: #0a58ca">
                            АГРОТЕП
                            <span
                              th:hidden="${clientCompany?.clientDto?.blacklist != true}"
                              class="text-danger-emphasis is-in-black-list"
                            >
                              У чорному списку
                            </span>
                          </p>
                          <div class="row">
                            <table class="table-responsive client-sums ms-3">
                              <tr
                                th:hidden="${clientCompany?.agtCreditLimit == null}"
                                class="text-primary col-12 agt-credit-limit"
                              >
                                <td>Кредитний ліміт</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.agtCreditLimit, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  4 000 000
                                </td>
                              </tr>
                              <tr
                                th:hidden="${clientCompany?.agtDebt == null}"
                                class="text-danger col-12 agt-debt"
                              >
                                <td>борг на зараз</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.agtDebt, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  3 527 944
                                </td>
                              </tr>
                              <tr
                                th:hidden="${clientCompany?.agtExpiredDebt == null}"
                                class="col-12 agt-expired-debt"
                              >
                                <td>прострочений борг</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.agtExpiredDebt, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  3 527 944
                                </td>
                              </tr>
                            </table>
                          </div>
                          <div class="table-responsive">
                            <label>
                              <input
                                type="checkbox"
                                th:field="*{isContractAgt}"
                                hidden="hidden"
                              />
                            </label>
                            <table
                              class="table text-nowrap mb-0 align-middle contracts-agt"
                            >
                              <tbody class="border-bottom">
                                <tr>
                                  <th>у ДР</th>
                                  <th>Договір</th>
                                  <th>Тип</th>
                                  <th>Закінчення</th>
                                  <th>Коментарі</th>
                                </tr>
                                <tr
                                  class="contracts-agt"
                                  th:if="${clientCompany}"
                                  th:each="contract: ${clientCompany?.contractsAgt}"
                                >
                                  <td class="border-bottom-0">
                                    <label>
                                      <input
                                        type="radio"
                                        th:field="*{contractKod}"
                                        th:value="${contract?.kod}"
                                        th:checked="${transportation.isContractAgt and transportation.contractKod == contract?.kod}"
                                      />
                                    </label>
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.enterNo}"
                                  >
                                    -
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.contractType}"
                                  >
                                    Міжнародний
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.finishDateStr}"
                                  >
                                    31.12.2021
                                  </td>
                                  <td class="border-bottom-0">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      class="icon icon-tabler icon-tabler-message"
                                      width="24"
                                      height="24"
                                      viewBox="0 0 24 24"
                                      stroke-width="2"
                                      stroke="currentColor"
                                      fill="none"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      data-bs-trigger="hover"
                                      data-bs-toggle="popover"
                                      data-bs-placement="bottom"
                                      th:attr="data-bs-content=${contract.comments}"
                                    >
                                      <path
                                        stroke="none"
                                        d="M0 0h24v24H0z"
                                        fill="none"
                                      />
                                      <path d="M8 9h8" />
                                      <path d="M8 13h6" />
                                      <path
                                        d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"
                                      />
                                    </svg>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <p
                            class="fw-semibold mb-2 mt-3"
                            style="color: #dc3545"
                          >
                            ВП-ТРАНС
                          </p>
                          <div class="row">
                            <table class="table-responsive client-sums ms-3">
                              <tr
                                th:hidden="${clientCompany?.vptCreditLimit == null}"
                                class="text-primary col-12 vpt-credit-limit"
                              >
                                <td>Кредитний ліміт</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.vptCreditLimit, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  4 000 000
                                </td>
                              </tr>
                              <tr
                                th:hidden="${clientCompany?.vptDebt == null}"
                                class="text-danger col-12 vpt-debt"
                              >
                                <td>борг на зараз</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.vptDebt, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  3 527 944
                                </td>
                              </tr>
                              <tr
                                th:hidden="${clientCompany?.vptExpiredDebt == null}"
                                class="col-12 vpt-expired-debt"
                              >
                                <td>прострочений борг</td>
                                <td
                                  th:text="${#numbers.formatInteger(clientCompany?.vptExpiredDebt, 0, 'WHITESPACE')}"
                                  class="ps-2 monospace-numbers"
                                >
                                  3 527 944
                                </td>
                              </tr>
                            </table>
                          </div>
                          <div class="table-responsive">
                            <label>
                              <input
                                type="checkbox"
                                th:field="*{isContractVpt}"
                                hidden="hidden"
                              />
                            </label>
                            <table
                              class="table text-nowrap mb-0 align-middle contracts-vpt"
                            >
                              <tbody class="border-bottom">
                                <tr>
                                  <th>у ДР</th>
                                  <th>Договір</th>
                                  <th>Тип</th>
                                  <th>Закінчення</th>
                                  <th>Коментарі</th>
                                </tr>
                                <tr
                                  class="contracts-vpt"
                                  th:if="${clientCompany}"
                                  th:each="contract: ${clientCompany?.contractsVpt}"
                                >
                                  <td class="border-bottom-0">
                                    <label>
                                      <input
                                        type="radio"
                                        th:field="*{contractKod}"
                                        th:value="${contract?.kod}"
                                        th:checked="${transportation.isContractVpt and transportation.contractKod == contract?.kod}"
                                      />
                                    </label>
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.enterNo}"
                                  >
                                    -
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.contractType}"
                                  >
                                    Міжнародний
                                  </td>
                                  <td
                                    class="border-bottom-0"
                                    th:text="${contract.finishDateStr}"
                                  >
                                    31.12.2021
                                  </td>
                                  <td class="border-bottom-0">
                                    <svg
                                      xmlns="http://www.w3.org/2000/svg"
                                      class="icon icon-tabler icon-tabler-message"
                                      width="24"
                                      height="24"
                                      viewBox="0 0 24 24"
                                      stroke-width="2"
                                      stroke="currentColor"
                                      fill="none"
                                      stroke-linecap="round"
                                      stroke-linejoin="round"
                                      data-bs-trigger="hover"
                                      data-bs-toggle="popover"
                                      data-bs-placement="bottom"
                                      th:attr="data-bs-content=${contract.comments}"
                                    >
                                      <path
                                        stroke="none"
                                        d="M0 0h24v24H0z"
                                        fill="none"
                                      />
                                      <path d="M8 9h8" />
                                      <path d="M8 13h6" />
                                      <path
                                        d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z"
                                      />
                                    </svg>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                      <div class="card p-4 col-md-6 row-gap-2 background">
                        <div class="row">
                          <div class="col-md-4">
                            <label for="cargo-name">
                              Вантаж
                              <input
                                th:field="*{cargo}"
                                type="text"
                                id="cargo-name"
                                class="form-control"
                                required
                              />
                            </label>
                          </div>
                          <div class="col-md-4">
                            <label for="cargo-weight">
                              Вага, т
                              <input
                                th:field="*{cargoWeightTons}"
                                type="number"
                                id="cargo-weight"
                                class="form-control"
                                min="0"
                                step="0.01"
                                required
                              />
                            </label>
                          </div>
                          <div class="col-md-4">
                            <label for="select-truck-type">
                              Тип кузова
                              <select
                                id="select-truck-type"
                                class="form-select"
                                th:field="*{trailerType}"
                                required
                              >
                                <option th:value="${null}">---</option>
                                <option
                                  th:each="typ: ${T(com.agrotep.imex.dto.enums.AcceptableTruckType).values()}"
                                  th:value="${typ}"
                                  th:text="${typ.typeName}"
                                >
                                  реф
                                </option>
                              </select>
                            </label>
                          </div>
                        </div>
                        <div class="row align-items-center">
                          <div class="col-md-4">
                            <label for="temperature-min"
                              >мінімальна температура</label
                            >
                            <input
                              th:field="*{temperatureMin}"
                              type="number"
                              id="temperature-min"
                              class="form-control temperature-condition"
                            />
                          </div>
                          <div class="col-md-4">
                            <label for="temperature-max"
                              >максимальна температура</label
                            >
                            <input
                              th:field="*{temperatureMax}"
                              type="number"
                              id="temperature-max"
                              class="form-control temperature-condition"
                            />
                          </div>
                          <div class="col-md-4">
                            <label
                              class="form-check-label"
                              for="is-cargo-thermal-printer-needed"
                            >
                              <input
                                th:field="*{isThermalPrinterNeeded}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-thermal-printer-needed"
                              />
                              Потрібен роздрук
                            </label>
                          </div>
                        </div>
                        <div
                          class="row temperature-modes"
                          th:hidden="${transportation.temperatureMin == null and transportation.temperatureMax == null}"
                        >
                          <ul class="row mt-3 mb-3">
                            <li
                              th:each="tm : ${temperatureModes}"
                              class="col-4"
                            >
                              <label>
                                <span th:text="${tm.title}"></span>
                                <input
                                  type="radio"
                                  th:field="*{temperatureMode}"
                                  th:value="${tm}"
                                />
                              </label>
                            </li>
                          </ul>
                        </div>
                        <div class="row align-items-center">
                          <div class="col-md-4">
                            <label for="freight">
                              Фрахт
                              <input
                                th:field="*{freight}"
                                type="number"
                                id="freight"
                                class="form-control"
                                min="0"
                                step="0.01"
                                th:required="${transportation.equipageId != null}"
                              />
                            </label>
                          </div>
                          <div class="col-md-4">
                            <label for="currency">
                              Валюта
                              <select
                                th:field="*{currency}"
                                id="currency"
                                class="form-select"
                                th:required="${transportation.equipageId != null}"
                              >
                                <option th:value="${null}">---</option>
                                <option
                                  th:each="c: ${currencies}"
                                  th:value="${c.key}"
                                  th:text="${c.value}"
                                >
                                  грн
                                </option>
                              </select>
                            </label>
                          </div>
                          <div class="col-md-4">
                            <label
                              class="form-check-label"
                              for="is-payment-in-cash"
                            >
                              <input
                                th:field="*{isLoadingPaymentInCash}"
                                type="checkbox"
                                class="form-check-input me-2"
                                id="is-payment-in-cash"
                              />
                              Готівка
                            </label>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <div class="form-check">
                              <input
                                th:field="*{isTir}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-tir"
                              />
                              <label class="form-check-label" for="is-cargo-tir"
                                >TIR</label
                              >
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-check">
                              <input
                                th:field="*{isAdr}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-adr"
                              />
                              <label
                                class="form-check-label text-danger"
                                for="is-cargo-adr"
                                >ADR</label
                              >
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-check">
                              <input
                                th:field="*{isAdr1}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-adr1"
                              />
                              <label
                                class="form-check-label text-danger"
                                for="is-cargo-adr1"
                                >ADR1</label
                              >
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-check">
                              <input
                                th:field="*{isCustomsServicePaid}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-customs-services-paid"
                              />
                              <label
                                class="form-check-label"
                                for="is-cargo-customs-services-paid"
                              >
                                мито
                              </label>
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-check">
                              <input
                                th:field="*{isStickers}"
                                type="checkbox"
                                class="form-check-input"
                                id="is-cargo-stickers"
                              />
                              <label
                                class="form-check-label"
                                for="is-cargo-stickers"
                                >Стікери</label
                              >
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-4">
                            <label for="border-crossing-point"
                              >Погран. перехід</label
                            >
                            <select
                              id="border-crossing-point"
                              class="form-select"
                              th:field="*{borderCrossingPoint}"
                            >
                              <option
                                th:each="p: ${borderCrossingPoints}"
                                th:value="${p.ndov}"
                                th:text="${p.ndov}"
                              ></option>
                            </select>
                          </div>
                          <div class="col-md-4">
                            <label for="customer-application-no">
                              Заявка №
                              <input
                                th:field="*{customerApplicationNo}"
                                id="customer-application-no"
                                class="form-control"
                              />
                            </label>
                          </div>
                          <div class="col-md-4">
                            <label for="customer-application-date">
                              від
                              <input
                                th:field="*{customerApplicationDateStr}"
                                type="date"
                                id="customer-application-date"
                                class="form-control"
                              />
                            </label>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12">
                            <label for="textarea1">Коментар</label>
                            <textarea
                              th:field="*{coordinatorComment}"
                              id="textarea1"
                              class="form-control"
                              rows="3"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Eighth Line: One Input Number, One Input Select, One Checkbox -->
                    <div class="row" id="loadings">
                      <div
                        th:each="loading, i: *{loadings}"
                        class="accordion col-md-6 loading-form"
                      >
                        <div
                          class="accordion-item border-0 card p-4 background col-md-6 w-100"
                        >
                          <h2 class="accordion-header">
                            <button
                              class="background accordion-button shadow-none"
                              type="button"
                              data-bs-toggle="collapse"
                              aria-expanded="true"
                              th:attr="data-bs-target=${'#loading_no_' + i.index},
                                                            aria-controls=${'loading_no_' + i.index}"
                            >
                              <div class="card-title mb-9 fw-semibold">
                                <span
                                  class="card-title"
                                  th:text="${(loading?.loadingNo != null ? loading?.loadingNo + '. ' : '') + (loadingTypes.contains(loading?.loadingType) ? 'Завантаження' : 'Розвантаження')}"
                                  >Завантаження</span
                                >
                                <span
                                  class="additional-values ms-2 me-2"
                                ></span>
                                <span class="delete-icon" title="Видалити">
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="16"
                                    height="16"
                                    fill="black"
                                    class="bi bi-trash"
                                    viewBox="0 0 16 16"
                                  >
                                    <path
                                      d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"
                                    ></path>
                                    <path
                                      d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"
                                    ></path>
                                  </svg>
                                </span>
                              </div>
                            </button>
                          </h2>
                          <div
                            th:attr="id=${'loading_no_' + i.index}"
                            class="accordion-collapse collapse border-0 show"
                          >
                            <div class="accordion-body p-0">
                              <!-- First Line: Select Input, One Input Date, One Input Time -->
                              <div class="row mb-4">
                                <label hidden="hidden">
                                  id
                                  <input
                                    type="number"
                                    th:field="*{loadings[__${i.index}__].id}"
                                    name="id"
                                    class="form-control"
                                  />
                                </label>
                                <label class="col-md-3">
                                  №
                                  <input
                                    type="number"
                                    th:field="*{loadings[__${i.index}__].loadingNo}"
                                    name="loading-no"
                                    class="form-control loading-no"
                                    th:attr="min=${i.index + 1}"
                                    required
                                  />
                                </label>

                                <label class="col-md-3">
                                  Тип
                                  <select
                                    th:field="*{loadings[__${i.index}__].loadingType}"
                                    name="loading-type"
                                    class="form-select loading-type"
                                    required
                                  >
                                    <option
                                      th:each="t: ${loadingTypes}"
                                      th:value="${t}"
                                      th:text="${t.notation}"
                                      th:selected="${loading.loadingType == t}"
                                    >
                                      Зав
                                    </option>
                                    <option
                                      th:each="t: ${unloadingTypes}"
                                      th:value="${t.name()}"
                                      th:text="${t.notation}"
                                      th:selected="${loading.loadingType == t}"
                                    >
                                      РозвРозм
                                    </option>
                                  </select>
                                </label>
                                <label class="col-md-3">
                                  Дата
                                  <input
                                    type="date"
                                    th:field="*{loadings[__${i.index}__].loadingDate}"
                                    name="loading-date"
                                    class="form-control loading-date"
                                    required
                                  />
                                </label>
                                <label class="col-md-3">
                                  Час
                                  <input
                                    type="time"
                                    th:field="*{loadings[__${i.index}__].loadingTime}"
                                    name="loading-time"
                                    class="form-control loading-time"
                                    required
                                  />
                                </label>
                              </div>
                              <!-- First Line: Select Input, One Input Date, One Input Time -->
                              <div class="row mb-4">
                                <label class="col-md-12">
                                  Пункт
                                  <input
                                    type="text"
                                    size="50"
                                    placeholder="Enter a location"
                                    autocomplete="on"
                                    runat="server"
                                    class="form-control loading-time autocomplete-input"
                                    th:required="*{id == null && loadings[__${i.index}__].loadingCity == null}"
                                  />
                                </label>
                              </div>
                              <!-- Second Line: One Input Text, One Select Input -->
                              <div class="row mb-4">
                                <label class="col-md-4">
                                  Місто
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingCity}"
                                    type="text"
                                    class="form-control loading-city city2"
                                    name="city2"
                                    required
                                  />
                                </label>
                                <label class="col-md-4">
                                  Країна
                                  <input
                                    type="text"
                                    th:field="*{loadings[__${i.index}__].loadingCountry}"
                                    name="loading-country"
                                    class="form-control country"
                                    required
                                  />
                                </label>
                                <label class="col-md-4">
                                  Область
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingRegion}"
                                    th:required="*{'UA'.equals(loadings[__${i.index}__].loadingCountry)}"
                                    type="text"
                                    name="loading-region"
                                    class="form-control region"
                                  />
                                </label>
                              </div>
                              <!-- Third Line: One Input Text, One Select Input -->
                              <div class="row mb-4">
                                <label class="col-md-6">
                                  Пошт. код
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingCityPostalIndex}"
                                    type="text"
                                    name="loading-city-postal-index"
                                    class="form-control postal_code"
                                  />
                                </label>
                                <label class="col-md-6">
                                  Адреса
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingAddress}"
                                    type="text"
                                    name="loading-address"
                                    class="form-control city3"
                                  />
                                </label>
                              </div>
                              <!-- Forth Line: One Input Text, One Select Input -->
                              <!-- Fifth Line: One Input Text, One Select Input -->
                              <div class="row">
                                <label class="col-md-6">
                                  Широта
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingLatitude}"
                                    type="text"
                                    class="form-control cityLat"
                                    name="cityLat"
                                  />
                                </label>
                                <label class="col-md-6">
                                  Довгота
                                  <input
                                    th:field="*{loadings[__${i.index}__].loadingLongitude}"
                                    type="text"
                                    class="form-control cityLng"
                                    name="cityLng"
                                  />
                                </label>
                              </div>
                            </div>
                          </div>
                          <div class="col-md-4">
                            <button
                              type="button"
                              class="btn btn-light mt-2 rounded-circle p-2"
                              th:value="add-loading"
                              th:name="add-loading"
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-plus"
                                width="24"
                                height="24"
                                viewBox="0 0 24 24"
                                stroke-width="2"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                              >
                                <path
                                  stroke="none"
                                  d="M0 0h24v24H0z"
                                  fill="none"
                                />
                                <path d="M12 5l0 14" />
                                <path d="M5 12l14 0" />
                              </svg>
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12">
                        <div
                          class="col-md-6 d-flex justify-content-between ps-0"
                          id="buttons-block"
                        >
                          <span
                            data-bs-trigger="hover"
                            data-bs-toggle="popover"
                            data-bs-placement="top"
                            th:attr="data-bs-content=${not #strings.isEmpty(transportation.drProtectionCause)
                                                        ? transportation.drProtectionCause
                                                        : 'Додати в ДР'}"
                          >
                            <button
                              style="max-height: 50px"
                              type="submit"
                              class="btn btn-primary m-1"
                              th:value="add-to-dr"
                              th:name="add-to-dr"
                              th:disabled="${transportation.equipageId == null
                                                            or not #strings.isEmpty(transportation.drProtectionCause)}"
                            >
                              Додати в ДР
                            </button>
                          </span>
                          <label
                            class="col-md-3"
                            th:unless="${transportation.id}"
                          >
                            Додаткових копій
                            <input
                              type="number"
                              th:field="*{nCopies}"
                              name="number-of-copies"
                              class="form-control"
                              min="0"
                              max="20"
                            />
                          </label>
                          <button
                            type="submit"
                            class="btn btn-outline-success m-1"
                            style="max-height: 50px"
                            th:value="copy"
                            th:name="copy"
                            th:if="${transportation.id}"
                          >
                            Створити копію
                          </button>
                          <button
                            th:if="${transportation?.id}"
                            type="submit"
                            class="btn btn-danger m-1"
                            th:value="cancel"
                            th:name="cancel"
                          >
                            Відмінити
                          </button>
                          <button
                            type="submit"
                            class="btn btn-success m-1"
                            style="max-height: 50px"
                            th:value="submit"
                            th:name="submit"
                            id="submit-transportation-details"
                          >
                            Розмістити перевезення
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="loader"></div>
                </div>
              </div>

              <!--  code input -->
            </div>
          </form>
        </div>
        <div
          class="modal fade"
          id="settingsModal"
          tabindex="-1"
          aria-labelledby="settingsModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog" style="max-width: 700px">
            <div class="modal-content p-4">
              <form
                action="#"
                th:action="@{/design/font}"
                th:object="${fontDto}"
                method="post"
                class="text-center row"
                id="fontModalForm"
              >
                <div class="modal-header">
                  <h4 class="modal-title fs-7" id="settingsModalLabel">
                    Налаштування інтерфейсу
                  </h4>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body row">
                  <label>
                    <input hidden="hidden" type="text" th:field="*{page}" />
                  </label>
                  <label>
                    <input hidden="hidden" type="text" th:field="*{id}" />
                  </label>
                  <label>
                    <input
                      hidden="hidden"
                      type="text"
                      th:field="*{redirectAttribute}"
                    />
                  </label>
                  <div class="font-size-block col-sm-6 text-center mt-3">
                    <h5 class="mb-3">Розмір шрифту</h5>
                    <label
                      class="m-2"
                      th:each="i: ${T(java.util.List).of(1, 2, 3, 4, 5)}"
                    >
                      <span th:text="${i}">1</span>
                      <input
                        class="ms-1"
                        type="radio"
                        name="fontSize"
                        th:attr="id=${'fs-' + (i + 1)}"
                        th:value="${'fs-' + (i + 1)}"
                        th:field="*{fontSize}"
                      />
                    </label>
                  </div>
                  <div class="fotn-weight-block col-sm-6 text-center mt-3">
                    <h5 class="mb-3">Насиченість шрифту</h5>
                    <label
                      class="m-2"
                      th:each="s, iStat: ${T(java.util.List).of('fw-lighter', 'fw-normal', 'fw-bolder')}"
                    >
                      <span th:text="${fontDto.getTitle(s)}"></span>
                      <input
                        class="ms-1"
                        type="radio"
                        name="fontWeight"
                        th:attr="id=${'font-weight' + iStat.index}"
                        th:value="${s}"
                        th:field="*{fontWeight}"
                      />
                    </label>
                  </div>
                  <div class="background-variants-block mt-3 text-center">
                    <h5 class="mb-3">Налаштування кольору фону</h5>
                    <label
                      th:attr="for=${c}"
                      class="m-2"
                      th:each="c, iStat: ${T(java.util.List).of('background-blue', 'background-green',
                                            'background-red', 'background-lightgrey', 'background-darkgrey',
                                            'background-brown', 'background-violet', 'background-default')}"
                    >
                      <span th:text="${fontDto.getColor(c)}">синій</span>
                      <input
                        class="ms-1"
                        type="radio"
                        name="backgroundColor"
                        th:attr="id=${c}"
                        th:value="${c}"
                        th:field="*{backgroundColor}"
                      />
                    </label>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary">
                    Save changes
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script th:src="@{/assets/libs/jquery/dist/jquery.min.js}"></script>
    <script
      type="text/javascript"
      th:src="@{/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js}"
    ></script>
    <script
      type="text/javascript"
      th:src="@{/assets/js/sidebarmenu.js}"
    ></script>
    <script type="text/javascript" th:src="@{/assets/js/app.min.js}"></script>
    <script
      type="text/javascript"
      th:src="@{/assets/libs/simplebar/dist/simplebar.js}"
    ></script>

    <script
      th:src="@{/assets/libs/select2-4.1.0-rc.0/dist/js/select2.min.js}"
    ></script>
    <script th:src="@{/assets/js/add-transportation-details.js}"></script>
    <script
      type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWaYJ47zp6qO2N4lCefOKWqvC1Il3VdQE&libraries=places&language=uk"
    ></script>
    <script th:src="@{/assets/js/settingsStyle.js}"></script>

    <script>
      function initializeAutocomplete(inputElement) {
        var circle = new google.maps.Circle({
          center: new google.maps.LatLng(49.998526, 36.299138),
          radius: 4000000,
        });

        var options = {
          strictBounds: true,
          bounds: circle.getBounds(),
          //   types: ['(cities)'],
        };
        var autocomplete = new google.maps.places.Autocomplete(
          inputElement,
          options
        );

        google.maps.event.addListener(
          autocomplete,
          'place_changed',
          function () {
            var place = autocomplete.getPlace();

            var cardElement = inputElement.closest('.card');
            console.log(place);
            cardElement.querySelector('.city3').value = place.name;
            cardElement.querySelector('.cityLat').value =
              place.geometry.location.lat();
            cardElement.querySelector('.cityLng').value =
              place.geometry.location.lng();

            // Additional information
            var addressComponents = place.address_components;
            cardElement.querySelector('.country').value = '';
            cardElement.querySelector('.region').value = '';
            cardElement.querySelector('.postal_code').value = '';
            let country;
            let region;
            for (var i = 0; i < addressComponents.length; i++) {
              var component = addressComponents[i];
              var types = component.types;
              for (var j = 0; j < types.length; j++) {
                if (types[j] === 'locality') {
                  cardElement.querySelector('.city2').value =
                    component.long_name;
                } else if (types[j] === 'country') {
                  country = component.short_name;
                  cardElement.querySelector('.country').value = country;
                } else if (types[j] === 'administrative_area_level_1') {
                  region = component.long_name;
                } else if (types[j] === 'postal_code') {
                  cardElement.querySelector('.postal_code').value =
                    component.long_name;
                }
              }
            }
            if ('UA' === country) {
              cardElement.querySelector('.region').value = region;
            }
          }
        );
      }

      window.onload = function () {
        var inputElements = document.querySelectorAll('.autocomplete-input');
        inputElements.forEach(function (inputElement) {
          initializeAutocomplete(inputElement);
        });
      };
    </script>
    <script>
      function addAccordionFunctionality(button) {
        var form = button.closest('.accordion-item');
        const dib = form.querySelector('.accordion-collapse');

        var loadingDateValue = form.querySelector('.loading-date').value;
        var loadingCityValue = form.querySelector('.city2').value;
        var loadingCountryValue = form.querySelector('.country').value;
        if (loadingCityValue && loadingDateValue) {
          dib.classList.remove('show');
          button.classList.add('collapsed');
          const span = button.querySelector('.additional-values');
          const data = button.closest('.accordion-item');
          const date = data.querySelector('.loading-date').value;
          const city = data.querySelector('.city2').value;
          const country = data.querySelector('.country').value;

          span.innerHTML = `
                      <span>${date}, ${city}, ${country}</span>
                  `;
        }
        button.addEventListener('click', function (event) {
          var additionalValuesSpan =
            event.delegateTarget.querySelector('.additional-values'); // Знаходимо span в межах цієї форми
          if (event.delegateTarget.classList.contains('collapsed')) {
            const data = event.target.closest('.accordion-item');
            const date = data.querySelector('.loading-date').value;
            const city = data.querySelector('.city2').value;
            const country = data.querySelector('.country').value;

            additionalValuesSpan.innerHTML = `
                      <span>${date}, ${city}, ${country}</span>
                  `;
          } else {
            additionalValuesSpan.innerHTML = '';
          }
        });
      }
      var accordionButtons = document.querySelectorAll('.accordion-button');
      for (var i = 1; i < accordionButtons.length; i++) {
        var button = accordionButtons[i];
        addAccordionFunctionality(button);
      }
    </script>
  </body>
</html>
